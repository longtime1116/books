実践ドメイン駆動設計


# 第0章

## DDDの概要
### 戦略的モデリング
### アーキテクチャ


* 例
  * itemドメインモデル: validationとか、item情報をまとめるとか。(rails でいう model ではこういうことをやっている)
  * アプリケーション: ロジック
  * アダプター: API、APIのインターフェースを最初に吸収する場所
* この六角形ひとつが境界づけられたコンテキストと一対一対応



### 戦術的モデリング

* 集約
  * 自転車集約のなかに、value object/entitiy がたくさんあるイメージ(車輪オブジェクト、タイヤオブジェクト)

* 例
  * 集約1
    * aggregate root: 自転車
    * entity: 車輪
    * entity: タイヤ
    * value object: 位置(実態があるものではないが、あったほうが良いもの)
  * 集約2
    * aggregate root: エンジン
* 外部からは、aggregate root(集約ルート)にしかアクセスできない
* リポジトリ
  * 集約に必要なものをまとめてこいつに渡すと、集約のインスタンスを作ってDBとかにアクセスして保存する。
  * 保存するだけでなく、検索とかもやらせる。
* rails においては、model が集約とリポジトリを兼ねている => まさに model

* service は複数の集約にまたがる操作を実行する
* クエリ操作が参照系、コマンド操作が更新系

* イベント
  * 集約がイベントを作成してイベントを作成して、イベントパブリッシャーに渡す
  * イベントパブリッシャーがイベントを発火する。各サブスクライバに処理を委ねる。
  * ex. ユーザコンテキストの集約がユーザ削除イベントを作成してイベントパブリッシャーに渡す。イベントパブリッシャーはユーザへメールを送るサブスクライバや、itemコンテキストにも削除を依頼するサブスクライバに処理をお願いする。

* モジュール
  * 外部公開されない集約

# 第1章
