15Stepで習得 Docker から入る Kubernetes コンテナ開発からK8s本番運用まで


# step06
* デプロイメントなしでpodを起動すると、すぐ終了できる。
* デプロイメントありで、そこにpod数を設定しておくと、その状態に常にしようとするので、podが削除されたらすぐ再度起動しようとする。
* 一回実行して終わる系のやつはジョブを使う。

# step07
* podのヘルスチェック
  * ポッドを実行しているノード上のkubeletからの実行(kubeletとpodの関係はp45の図参照)
    * 活性プローブ(Liveness Probe) と準備状態プローブ(Readiness Probe) の二種類のプローブを利用する。マニフェストに書くと、実行される。
  * ↑だとノード障害とかのときには対応できないので、コントローラでも対策しなければならない。
* 初期化専用コンテナを使ったり、サイドカーパターンを用いたりすることがある。
  * サイドカーパターンは、例えばメインのコンテナとは別に静的ファイルの更新をチェックするコンテナを置くなどして、複数のコンテナを強調させ再利用することで、より高い機能を実現するようにするためのもの。

